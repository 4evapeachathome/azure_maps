<div *ngIf="loaded" class="common-container risk-assessment-container h-100">
  <ion-grid class="p-0 h-100">
    <ion-row class="h-100">
      <!-- Left Image Panel -->
      <ion-col size="12" size-sm="12" size-lg="6" class="ra-banner order2">
        <div class="risk-login-banner banner-img"></div>
      </ion-col>

      <!-- Right Form Panel -->
           <ion-col size="12" size-sm="12" size-lg="6" class="ra-form-container order1">
        <ion-card class="form-container rafc-container">
          <ion-grid class="d-flex-h-100">
            <ion-row>
              <ion-col size="12" size-sm="12">
                <div class="user-info">
                  <ion-text>Hi, {{ loggedInUser?.username || "User" }}</ion-text>
                
                <!-- <div class="guided-options">
              <ion-label>{{ guidedType }}</ion-label>
            </div>
                 -->


            <div class="dropdown">

  <ion-button shape="round" fill="clear">
  <ion-icon name="person-circle"></ion-icon>
</ion-button>
  <div class="dropdown-content">
  <a (click)="logout()">Logout</a>

  </div>


                  </div>
                </div>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="12" size-sm="12" size-lg="12" class="radio-selected-container">
                <ion-radio-group [(ngModel)]="guidedType" [allowEmptySelection]="true">
                  <ion-radio [value]="guidedType" labelPlacement="end" mode="md">{{ guidedTypeLabel }}</ion-radio>
                </ion-radio-group>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="12" size-sm="12">
                <h2>{{ assessmentTitle }}</h2>
              </ion-col>
            </ion-row>
            <ion-row class="assessment-summary-text">
              <ion-col>
                <ion-text >
                  Thanks for taking the <strong>{{ selectedAssessment }}</strong> assessment.<br /><br />
                 <strong> Here is your score: </strong><br/><span class="score">{{ riskValue }}</span><br />
                  <strong>Note:</strong> {{ note }}<br />
                  <strong>Caution:</strong> {{ caution }}
                </ion-text>
              </ion-col>
            </ion-row>
            

            <ion-row>
              <ion-col size="12" size-sm="12" size-lg="7" class="p-0">
 
                <ion-row *ngIf="isSSripa">
                      <ion-col size="12" size-sm="12">
                          <div class="qr-code-wrapper">
          <qrcode #qrcodeEl [qrdata]="myAngularxQrCode" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
         
            
        </div>
                      </ion-col>
                </ion-row> 

              </ion-col>
               <ion-col size="12" size-sm="12" size-lg="5" class="p-0">
                     <div class="risk-meter">
      <!-- <h4>{{ riskLevelsTitle }}</h4> -->
        <app-summarypage></app-summarypage>
      <!-- <ngx-gauge
      [value]="riskValue"
      [label]="stressCurveLabel"
      [type]="'semi'"
      [min]="riskGaugeMin"
      [max]="riskGaugeMax"
      [thick]="25"
      [thresholds]="thresholdValues"
      [cap]="'round'"
      [size]="200"
      [foregroundColor]="'auto'">
    </ngx-gauge> -->
       <ion-button *ngIf="isSSripa" (click)="downloadPDF()" color="primary" size="small">Download as PDF</ion-button>
    </div>
       
              </ion-col>
            </ion-row>
        
          
           
          </ion-grid>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>
<div #pdfExportContainer [style.display]="hidePdfContainer ? 'none' : 'block'" 
     style="position: absolute; left: -9999px; top: -9999px; width: 800px; background: white; padding: 20px;">
  <h1>{{ assessmentTitle }}</h1>
  <p><strong>Case Number:</strong> {{ caseNumber }}</p>
  <p><strong>User:</strong> {{ loggedInUser?.username || "User" }}</p>

  <img #qrImage alt="QR Code Image" style="width: 150px; height: 150px;" />
</div>